name: 每日自動更新 HTML

on:
  schedule:
    - cron: "0 1 * * *"  # 每日 UTC 01:00 = 台灣 09:00
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: 下載 repo
      uses: actions/checkout@v3

    - name: 建立新的 HTML
      run: |
        echo "產出 index.html"
        echo "<!DOCTYPE html>" > index.html
        echo "<html lang='zh-Hant'>" >> index.html
        echo "<head><meta charset='UTF-8'><title>表面處理技術</title></head>" >> index.html
        echo "<body>" >> index.html
        echo "<h1>表面處理趨勢報告（$(date '+%Y-%m-%d')）</h1>" >> index.html
        echo "<p>這是每日自動產出的內容</p>" >> index.html
        echo "</body></html>" >> index.html

    - name: 提交並上傳
      run: |
        git config user.name github-actions
        git config user.email github-actions@github.com
        git add index.html
        git commit -m "每日自動更新報告 $(date '+%Y-%m-%d')" || echo "無變更"
        git push
